<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Explorador Digital ‚Äî Miss√£o TIC (5.¬∫ ano)</title>
  <style>
    :root{
      --bg1:#6a11cb; --bg2:#2575fc;
      --panel:#0f172a; --panel2:#111827;
      --accent:#00d4ff; --gold:#ffd700; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: "Segoe UI", system-ui, -apple-system, Roboto, "Helvetica Neue", Arial, "Noto Color Emoji";
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex; align-items:center; justify-content:center; overflow:hidden;
      color:#fff;
    }
    canvas{background:#0b1022;border-radius:18px;box-shadow:0 18px 60px rgba(0,0,0,.45);max-width:100%;max-height:100vh}
    .overlay{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none;
    }
    .card{
      pointer-events:auto;
      width:min(720px, 92vw);
      background:rgba(15,23,42,.9);
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px; padding:28px;
      box-shadow:0 18px 50px rgba(0,0,0,.55);
      text-align:center;
    }
    h1{font-size:clamp(1.6rem, 2.8vw + 1rem, 2.4rem);margin-bottom:6px;text-shadow:0 0 24px rgba(0,212,255,.35)}
    h2{font-size:clamp(1.1rem, 2vw + .6rem, 1.4rem);color:var(--gold);margin-bottom:8px}
    p{opacity:.95;line-height:1.6;margin:10px 0}
    .btn{
      display:inline-block;background:linear-gradient(135deg, var(--accent), #0ea5e9);
      color:#001118;border:none;border-radius:999px;font-weight:700;
      padding:14px 26px;margin-top:10px;cursor:pointer;
      box-shadow:0 10px 30px rgba(0,212,255,.35); transition: transform .15s, box-shadow .2s;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 14px 34px rgba(0,212,255,.45)}
    .hud{position:absolute; top:14px; left:14px; background:rgba(0,0,0,.5); padding:10px 14px; border-radius:10px; font-weight:700}
    .hud.right{left:auto; right:14px}
    .options{margin-top:14px; display:grid; gap:12px}
    .opt{
      text-align:left; padding:14px 16px; border-radius:12px; background:rgba(255,255,255,.07);
      border:2px solid rgba(255,255,255,.12); cursor:pointer; transition: all .2s;
    }
    .opt:hover{transform:scale(1.02); border-color:var(--accent); background:rgba(0,212,255,.18)}
    .opt.correct{border-color:var(--ok); background:rgba(34,197,94,.22)}
    .opt.wrong{border-color:var(--bad); background:rgba(239,68,68,.22)}
    .explain{margin-top:10px; background:rgba(255,255,255,.06); border-left:4px solid var(--warn); padding:10px 12px; border-radius:10px}
    .progress{height:12px; background:rgba(255,255,255,.1); border-radius:999px; margin-top:12px; overflow:hidden}
    .fill{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--gold)); transition:width .5s}
    .big{font-size:2rem}
    @keyframes pop{0%{transform:scale(.9);opacity:0}100%{transform:scale(1);opacity:1}}
    .pop{animation:pop .35s ease-out}
    .hidden{display:none!important}
    .chip{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,.08);padding:8px 12px;border-radius:999px;margin:6px 6px 0 0}
  </style>
</head>
<body>
  <canvas id="c"></canvas>

  <!-- MENU -->
  <div id="menu" class="overlay">
    <div class="card pop">
      <h1>üß≠ Explorador Digital</h1>
      <h2>Miss√£o TIC Segura (5.¬∫ ano)</h2>
      <p>Completa as miss√µes, aprende sobre <strong>TIC</strong> e prova que √©s um <em>Explorador Digital</em> respons√°vel!</p>
      <div>
        <span class="chip">üéØ Dificuldade: Moderada</span>
        <span class="chip">üîä Efeitos de recompensa</span>
        <span class="chip">‚å®Ô∏è 1‚Äì4 para responder</span>
      </div>
      <button class="btn" id="startBtn">üöÄ Iniciar Miss√£o</button>
      <p style="opacity:.8;margin-top:10px">Baseado no teu material da aula (TIC, Internet segura, sinais de alerta, ferramentas e boas pr√°ticas).</p>
    </div>
  </div>

  <!-- GAME HUD -->
  <div id="hudL" class="hud hidden">üíé Pontos: <span id="score">0</span></div>
  <div id="hudR" class="hud right hidden">üìò N√≠vel: <span id="lvl">1</span>/12</div>

  <!-- QUIZ PANEL -->
  <div id="panel" class="overlay hidden">
    <div class="card pop" style="text-align:left">
      <div class="progress"><div id="bar" class="fill"></div></div>
      <h2 id="qTitle" style="margin-top:8px">Miss√£o 1</h2>
      <p id="qText" style="font-size:1.1rem;margin-top:6px"></p>
      <div id="opts" class="options"></div>
      <div id="explain" class="explain hidden"></div>
    </div>
  </div>

  <!-- GAME OVER -->
  <div id="over" class="overlay hidden">
    <div class="card pop" style="text-align:center">
      <h1 class="big" id="resultTitle">üéâ Miss√£o Conclu√≠da!</h1>
      <p id="summary"></p>
      <div class="progress" style="margin-top:16px"><div id="finalBar" class="fill"></div></div>
      <p id="badge" class="big" style="margin-top:14px"></p>
      <button class="btn" id="again">üîÑ Jogar de novo</button>
    </div>
  </div>

<script>
// ===== Canvas background (particles) =====
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
function resize(){canvas.width=Math.min(1000, innerWidth-40); canvas.height=Math.min(640, innerHeight-40)};
addEventListener('resize', resize); resize();
const parts = Array.from({length:60}, () => ({
  x: Math.random()*canvas.width, y: Math.random()*canvas.height,
  r: Math.random()*2+1, vx:(Math.random()-.5)*.4, vy:(Math.random()-.5)*.4, a: Math.random()*.6+.2
}));
function loop(){
  ctx.fillStyle='#0b1022'; ctx.fillRect(0,0,canvas.width,canvas.height);
  for(const p of parts){
    p.x+=p.vx; p.y+=p.vy;
    if(p.x<0) p.x=canvas.width; if(p.x>canvas.width) p.x=0;
    if(p.y<0) p.y=canvas.height; if(p.y>canvas.height) p.y=0;
    ctx.fillStyle=`rgba(0,212,255,${p.a})`; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
  }
  requestAnimationFrame(loop);
}
loop();

// ===== Game data (moderate difficulty, 4 options) =====
const QUESTIONS = [
  { // TIC - defini√ß√£o
    q: "O que s√£o as TIC (Tecnologias de Informa√ß√£o e Comunica√ß√£o)?",
    a: ["Apenas jogos de computador", "Tecnologias para comunicar e tratar informa√ß√£o", "S√≥ redes sociais", "Apenas televis√£o"],
    c: 1,
    e: "As TIC juntam hardware, software e redes para comunicar, processar e partilhar informa√ß√£o de forma r√°pida."
  },
  { // √Åreas TIC
    q: "Qual N√ÉO √© uma √°rea t√≠pica das TIC?",
    a: ["Computa√ß√£o", "Comunica√ß√£o", "Controlo e Automa√ß√£o", "Agricultura tradicional"],
    c: 3,
    e: "Tr√™s pilares apresentados: Computa√ß√£o, Comunica√ß√£o e Controlo/Automa√ß√£o."
  },
  { // No dia a dia - escola
    q: "Um exemplo de TIC na escola √©:",
    a: ["Caderno de papel", "Quadro interativo e plataformas de aprendizagem", "Chap√©u de chuva", "Rel√≥gio anal√≥gico"],
    c: 1,
    e: "Exemplos incluem quadros interativos, computadores, tablets e plataformas online."
  },
  { // No dia a dia - casa
    q: "Em casa, usamos TIC quando‚Ä¶",
    a: ["Varrermos o ch√£o", "Vemos filmes na TV inteligente ou fazemos videochamadas", "Comemos sopa", "Dormimos"],
    c: 1,
    e: "TV inteligente, jogos, videochamadas e pesquisas s√£o exemplos de TIC no dia a dia."
  },
  { // Internet - pesquisar
    q: "Para que serve a Internet quando pesquisamos?",
    a: ["Encontrar informa√ß√£o rapidamente", "Fazer trabalhos de casa automaticamente", "Adivinhar respostas", "Apagar livros"],
    c: 0,
    e: "Pesquisar permite encontrar informa√ß√£o sobre muitos assuntos em segundos."
  },
  { // Seguran√ßa - HTTPS
    q: "O que significa o 'S' em HTTPS?",
    a: ["Super-r√°pido", "Seguro", "Simples", "Sem an√∫ncios"],
    c: 1,
    e: "HTTPS indica liga√ß√£o cifrada ‚Äî um sinal de site mais seguro."
  },
  { // Palavras-passe
    q: "Qual √© um bom exemplo de palavra‚Äëpasse?",
    a: ["alexandra123", "24junho", "Gato!Rio7#",
       "nome-da-escola"],
    c: 2,
    e: "Uma palavra‚Äëpasse forte mistura mai√∫sculas, min√∫sculas, n√∫meros e s√≠mbolos."
  },
  { // Estranhos
    q: "Na Internet, deves falar com:",
    a: ["Qualquer pessoa", "Apenas quem conheces", "Bots desconhecidos", "Quem te promete presentes"],
    c: 1,
    e: "Tal como na vida real, fala s√≥ com pessoas que conheces e confia."
  },
  { // Fotos
    q: "O que fazer com fotografias pessoais?",
    a: ["Enviar a estranhos", "Publicar tudo", "Nunca enviar a quem n√£o conheces", "Partilhar senhas com a foto"],
    c: 2,
    e: "Fotografias podem ficar na internet para sempre ‚Äî protege a tua imagem."
  },
  { // Sinais de alarme
    q: "Qual destes √© um ‚Äòsinal de alarme‚Äô online?",
    a: ["Mensagem a pedir dados pessoais", "Site com HTTPS", "Trabalho de escola", "Aplica√ß√£o da biblioteca"],
    c: 0,
    e: "Pedidos de dados, ofertas 'gr√°tis' e conte√∫dos impr√≥prios s√£o bandeiras vermelhas."
  },
  { // Ferramentas
    q: "Qual ferramenta ajuda a navegar com mais seguran√ßa?",
    a: ["Antiv√≠rus e controlo parental", "Aumentar o brilho", "Desligar o som", "Mudar o wallpaper"],
    c: 0,
    e: "Antiv√≠rus protege o computador e o controlo parental aplica filtros e limites."
  },
  { // Boas pr√°ticas
    q: "Boa pr√°tica ao usar computador por muito tempo:",
    a: ["Nunca fazer pausas", "Partilhar a password", "Pausas ativas a cada ~30 min", "Olhar sem piscar"],
    c: 2,
    e: "Pausas regulares, organiza√ß√£o e equil√≠brio com atividades fora do ecr√£ s√£o boas pr√°ticas."
  }
];

// ===== State =====
let level=1, score=0, locked=false;
const total=QUESTIONS.length;

// UI elements
const menuEl = document.getElementById('menu');
const startBtn = document.getElementById('startBtn');
const panelEl = document.getElementById('panel');
const overEl = document.getElementById('over');
const qTitle = document.getElementById('qTitle');
const qText = document.getElementById('qText');
const optsEl = document.getElementById('opts');
const explainEl = document.getElementById('explain');
const bar = document.getElementById('bar');
const finalBar = document.getElementById('finalBar');
const hudL = document.getElementById('hudL');
const hudR = document.getElementById('hudR');
const scoreEl = document.getElementById('score');
const lvlEl = document.getElementById('lvl');
const badgeEl = document.getElementById('badge');
const summaryEl = document.getElementById('summary');
const againBtn = document.getElementById('again');

function beep(type='ok'){
  const AC = window.AudioContext || window.webkitAudioContext;
  if(!AC) return;
  const ctx = new AC();
  const osc = ctx.createOscillator();
  const g = ctx.createGain();
  osc.connect(g); g.connect(ctx.destination);
  let f=660, t=.18;
  if(type==='ok'){ f=740; t=.16 }
  if(type==='bad'){ f=220; t=.22 }
  if(type==='win'){ f=880; t=.4 }
  osc.frequency.value=f; g.gain.value=.22;
  g.gain.exponentialRampToValueAtTime(.01, ctx.currentTime+t);
  osc.start(); osc.stop(ctx.currentTime+t);
}

function start(){
  menuEl.classList.add('hidden');
  hudL.classList.remove('hidden'); hudR.classList.remove('hidden');
  panelEl.classList.remove('hidden');
  level=1; score=0; updateHud(); load();
  beep('ok');
}

function updateHud(){
  scoreEl.textContent=score;
  lvlEl.textContent=level;
  bar.style.width = ((level-1)/total*100).toFixed(1)+'%';
}

function load(){
  explainEl.classList.add('hidden');
  optsEl.innerHTML='';
  const q = QUESTIONS[level-1];
  qTitle.textContent = `Miss√£o ${level}`;
  qText.textContent = q.q;
  q.a.forEach((text, i)=>{
    const div = document.createElement('button');
    div.className='opt';
    div.innerHTML = `<strong>${i+1}.</strong> ${text}`;
    div.onclick = ()=> pick(i);
    optsEl.appendChild(div);
  });
  locked=false;
}

function pick(i){
  if(locked) return; locked=true;
  const q = QUESTIONS[level-1];
  const nodes = [...optsEl.children];
  nodes[q.c].classList.add('correct');
  if(i!==q.c){ nodes[i].classList.add('wrong'); beep('bad'); }
  else { score += 100 + level*5; beep('ok'); }
  explainEl.textContent = (i===q.c ? '‚úîÔ∏è Correto! ' : '‚ÑπÔ∏è Quase! ') + q.e;
  explainEl.classList.remove('hidden');
  setTimeout(()=>next(), 1100);
}

function next(){
  level++;
  if(level>total){ return end(); }
  updateHud(); load();
}

function end(){
  hudL.classList.add('hidden'); hudR.classList.add('hidden');
  panelEl.classList.add('hidden');
  overEl.classList.remove('hidden');
  const pct = Math.round(score/(total*100)*100);
  finalBar.style.width = pct+'%';
  summaryEl.textContent = `Pontua√ß√£o final: ${score} pontos (${pct}%)`;
  let msg='üèÖ Explorador em Treino', badge='ü•â Bronze';
  if(pct>=90){ msg='üåü Mestre Explorador Digital'; badge='üèÜ Ouro'; beep('win'); }
  else if(pct>=70){ msg='üëè Excelente progresso!'; badge='ü•à Prata'; }
  else if(pct>=50){ msg='üëç Bom trabalho! Continua a praticar.'; badge='ü•â Bronze'; }
  else { msg='üí™ N√£o desistas! Repete a miss√£o.'; badge='üéñÔ∏è Participa√ß√£o'; }
  document.getElementById('resultTitle').textContent = msg;
  badgeEl.textContent = badge;
}

startBtn.onclick=start;
againBtn.onclick=()=>{ overEl.classList.add('hidden'); menuEl.classList.remove('hidden'); };

// Keyboard shortcuts 1-4
addEventListener('keydown', (e)=>{
  if(panelEl.classList.contains('hidden')) return;
  const map = {'1':0,'2':1,'3':2,'4':3};
  if(map.hasOwnProperty(e.key)){ pick(map[e.key]); }
});
</script>
</body>
</html>
